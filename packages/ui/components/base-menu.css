.m-BaseMenuContent {
	--scrollarea-scrollbar-vertical-margin-top: var(--base-menu-content-padding);
	--scrollarea-scrollbar-vertical-margin-bottom: var(
		--base-menu-content-padding
	);
	--scrollarea-scrollbar-horizontal-margin-left: var(
		--base-menu-content-padding
	);
	--scrollarea-scrollbar-horizontal-margin-right: var(
		--base-menu-content-padding
	);

	display: flex;
	flex-direction: column;
	box-sizing: border-box;
	overflow: hidden;
	background-color: var(--base-menu-bg);
}

.m-BaseMenuViewport {
	flex: 1 1 0%;
	display: flex;
	flex-direction: column;
	overflow: auto;
	padding: var(--base-menu-content-padding);
	box-sizing: border-box;

	:where(
			.m-BaseMenuContent:has(
					.m-ScrollAreaScrollbar[data-orientation='vertical']
				)
		)
		& {
		padding-right: var(--space-3);
	}
}

.base-menu:where(.m-variant-soft) {
	& :where([data-melt-dropdown-menu-subtrigger][data-state='open']) {
		background-color: var(--accent-a3);
	}

	& :where([role='menuitem'][data-accent-color]) {
		color: var(--accent-a11);
	}

	&
		:where(
			[role='menuitem'][data-highlighted],
			[role='option'][aria-selected='true']
		) {
		background-color: var(--accent-a4);
	}
}

.m-BaseMenuItem {
	display: flex;
	align-items: center;
	gap: var(--space-2);
	height: var(--base-menu-item-height);
	padding-left: var(--base-menu-item-padding-left);
	padding-right: var(--base-menu-item-padding-right);
	box-sizing: border-box;
	position: relative;
	outline: none;
	scroll-margin: var(--base-menu-content-padding) 0;

	/* Fix sticky text highlighting after selection in Firefox */
	user-select: none;
	cursor: default;

	&:where([data-disabled]) {
		cursor: default;
	}
}

.m-BaseMenuContent {
	&:where(.m-size-sm) {
		--base-menu-content-padding: var(--space-1);
		--base-menu-item-padding-left: calc(var(--space-5) / 1.2);
		--base-menu-item-padding-right: var(--space-2);
		--base-menu-item-height: var(--space-5);
		border-radius: var(--radius-3);

		& :where(.m-BaseMenuItem) {
			font-size: var(--font-size-1);
			line-height: var(--line-height-1);
			letter-spacing: var(--letter-spacing-1);
			border-radius: var(--radius-1);
		}

		& :where(.m-BaseMenuLabel) {
			font-size: var(--font-size-1);
			line-height: var(--line-height-1);
			letter-spacing: var(--letter-spacing-1);
		}

		& :where(.m-BaseMenuItemIndicatorIcon, .m-BaseMenuSubTriggerIcon) {
			width: calc(8px * var(--scaling));
			height: calc(8px * var(--scaling));
		}

		/* reset with :not:has so we still suppom browsers without :has */
		&:where(:not(:has(.m-BaseMenuCheckboxItem, .m-BaseMenuRadioItem))) {
			--base-menu-item-padding-left: var(--space-2);
		}
		&:where(:has(.m-BaseMenuCheckboxItem, .m-BaseMenuRadioItem)) {
			--base-menu-item-padding-left: calc(var(--space-5) / 1.2);
		}
	}

	&:where(.m-size-md) {
		--base-menu-content-padding: var(--space-2);
		--base-menu-item-padding-left: var(--space-3);
		--base-menu-item-padding-right: var(--space-3);
		--base-menu-item-height: var(--space-6);
		border-radius: var(--radius-4);

		& :where(.m-BaseMenuItem) {
			font-size: var(--font-size-2);
			line-height: var(--line-height-2);
			letter-spacing: var(--letter-spacing-2);
			border-radius: var(--radius-2);
		}

		& :where(.m-BaseMenuLabel) {
			font-size: var(--font-size-2);
			line-height: var(--line-height-2);
			letter-spacing: var(--letter-spacing-2);
		}

		& :where(.m-BaseMenuItemIndicatorIcon, .m-BaseMenuSubTriggerIcon) {
			width: calc(10px * var(--scaling));
			height: calc(10px * var(--scaling));
		}

		/* reset with :not:has so we still suppom browsers without :has */
		&:where(:not(:has(.m-BaseMenuCheckboxItem, .m-BaseMenuRadioItem))) {
			--base-menu-item-padding-left: var(--space-3);
		}
		&:where(:has(.m-BaseMenuCheckboxItem, .m-BaseMenuRadioItem)) {
			--base-menu-item-padding-left: var(--space-5);
		}
	}

	&:where(.m-size-lg) {
		--base-menu-content-padding: var(--space-3);
		--base-menu-item-padding-left: var(--space-4);
		--base-menu-item-padding-right: var(--space-4);
		--base-menu-item-height: var(--space-7);
		border-radius: var(--radius-5);

		& :where(.m-BaseMenuItem) {
			font-size: var(--font-size-2);
			line-height: var(--line-height-2);
			letter-spacing: var(--letter-spacing-2);
			border-radius: var(--radius-2);
		}

		& :where(.m-BaseMenuLabel) {
			font-size: var(--font-size-2);
			line-height: var(--line-height-2);
			letter-spacing: var(--letter-spacing-2);
		}

		& :where(.m-BaseMenuItemIndicatorIcon, .m-BaseMenuSubTriggerIcon) {
			width: calc(12px * var(--scaling));
			height: calc(12px * var(--scaling));
		}

		/* reset with :not:has so we still suppom browsers without :has */
		&:where(:not(:has(.m-BaseMenuCheckboxItem, .m-BaseMenuRadioItem))) {
			--base-menu-item-padding-left: var(--space-4);
		}
		&:where(:has(.m-BaseMenuCheckboxItem, .m-BaseMenuRadioItem)) {
			--base-menu-item-padding-left: var(--space-6);
		}
	}
}
